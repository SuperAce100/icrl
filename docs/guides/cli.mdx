---
title: "CLI"
description: "Complete reference for the Python icrl CLI"
---

## Overview

The Python package ships a Typer CLI at `icrl`.

Primary command groups:

- `icrl run`
- `icrl chat` / `icrl tui`
- `icrl config ...`
- `icrl db ...`
- `icrl version`

## Quick Start

```bash
icrl run "fix failing tests in this repo"
icrl chat
icrl config show
icrl db stats
```

## Global Helpers

```bash
icrl version
icrl --help
icrl --install-completion
```

## Command: `icrl run`

```bash
icrl run "<goal>" [OPTIONS]
```

Options:

- `-m, --model TEXT`
- `--no-train`
- `--compare`
- `-d, --dir PATH`
- `-v, --verbose`
- `--vertex-credentials PATH`
- `--vertex-project TEXT`
- `--vertex-location TEXT`
- `--stats / --no-stats`
- `-y, --auto-approve / --no-auto-approve`
- `--ablate`

Notes:

- `--ablate` runs with/without retrieved examples and prints a comparison.
- By default, successful runs can be stored to the trajectory DB.
- `--no-train` disables storing new successful trajectories.

## Commands: `icrl chat` and `icrl tui`

Both start the terminal UI flow.

```bash
icrl chat [OPTIONS]
icrl tui [OPTIONS]
```

Options:

- `-m, --model TEXT`
- `--compare`
- `-d, --dir PATH`
- `--stats / --no-stats`
- `-y, --auto-approve / --no-auto-approve`

## Config Commands

### Show config

```bash
icrl config show
```

### Set config value

```bash
icrl config set <key> <value>
```

Supported keys:

- `model`
- `temperature`
- `max_tokens`
- `max_steps`
- `k`
- `context_compression_threshold`
- `show_stats`
- `auto_approve`
- `db_path`
- `vertex_credentials_path`
- `vertex_project_id`
- `vertex_location`

### Reset config

```bash
icrl config reset
```

## Database Commands

Default behavior is project-local DB at `<working_dir>/.icrl/trajectories`.
Use `--global` to target the global fallback path.

### Stats

```bash
icrl db stats [--dir PATH] [--global]
```

### List

```bash
icrl db list [--limit N] [--dir PATH] [--global]
```

### Show one trajectory

```bash
icrl db show <trajectory_id_or_prefix> [--dir PATH] [--global]
```

### Semantic search

```bash
icrl db search "query" [--k N] [--dir PATH] [--global]
```

### Clear database

```bash
icrl db clear [--force] [--dir PATH] [--global]
```

### Validate code persistence

```bash
icrl db validate [trajectory_id] [--include-deprecated] [--dir PATH] [--global]
```

### List deprecated trajectories

```bash
icrl db deprecated [--dir PATH] [--global]
```

### Prune low-utility/deprecated trajectories

```bash
icrl db prune [--min-utility FLOAT] [--dry-run] [--force] [--dir PATH] [--global]
```

### Extract artifacts for older trajectories

```bash
icrl db extract-artifacts [--dir PATH] [--global]
```

## Provider Selection in CLI

- Default model in config is `claude-opus-4-5`.
- If model string matches Vertex aliases/patterns, CLI uses the Vertex tool provider.
- Otherwise CLI uses generic LiteLLM tool provider.
